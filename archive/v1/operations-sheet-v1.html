<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Pigeon Way - Operations Sheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,600;0,700;1,600&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        .serif {
            font-family: 'Playfair Display', serif;
        }

        .stage-header {
            background-color: white;
        }

        /* TDR Accordion Styles */
        .tdr-accordion {
            transition: all 0.3s ease;
        }

        .tdr-toggle {
            min-height: 44px; /* Touch-friendly tap target */
            cursor: pointer;
        }

        .tdr-toggle:focus {
            outline: 2px solid #10b981;
            outline-offset: 2px;
        }

        .tdr-content {
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }

        @media print {
            body {
                padding: 0;
                background: white;
            }

            .no-print {
                display: none;
            }

            .page-break {
                page-break-inside: avoid;
            }

            .tdr-accordion .tdr-content {
                max-height: none !important;
                display: block !important;
            }
        }

        @media (max-width: 768px) {
            .tdr-accordion {
                margin-top: 1rem;
            }
        }
    </style>
</head>

<body class="p-8 md:p-12 max-w-7xl mx-auto">

    <!-- Navigation Header (will be inserted by navigation.js) -->
    <div id="navigation-container"></div>

    <!-- Master Sheet Content (will be rendered by master-sheet-renderer.js) -->
    <div id="master-sheet-content">
        <!-- Loading message -->
        <div class="text-center text-slate-400 py-12">Loading master sheet...</div>
    </div>

    <!-- Legend Footer (will be inserted by legend.js) -->
    <div id="legend-container"></div>


    <div class="mt-12 text-center text-slate-400 text-xs border-t border-slate-200 pt-4 no-print">
        Generated by Inocta.io MIO Engine for Pigeon â€¢ Confidential
    </div>

    <!-- Load authentication -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <!-- Load shared utilities and renderer -->
    <script src="js/highlight-text.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/legend.js"></script>
    <script src="js/tdr-accordion-renderer.js"></script>
    <script src="js/master-sheet-renderer.js"></script>
    
    <!-- Initialize navigation, legend, and renderer -->
    <script>
        // Check authentication before loading page
        if (typeof requireAuth === 'function') {
            requireAuth('welcome.html');
        } else {
            // Wait for auth.js to load
            window.addEventListener('load', function() {
                if (typeof requireAuth === 'function') {
                    requireAuth('welcome.html');
                }
            });
        }
        
        // Insert navigation and legend
        document.addEventListener('DOMContentLoaded', function() {
            const navContainer = document.getElementById('navigation-container');
            if (navContainer) {
                navContainer.innerHTML = createNavigation('operations-sheet');
            }
            
            const legendContainer = document.getElementById('legend-container');
            if (legendContainer) {
                legendContainer.innerHTML = createLegendHTML();
            }
            
            // Initialize master sheet renderer
            initMasterSheet();
        });
    </script>

</body>

</html>